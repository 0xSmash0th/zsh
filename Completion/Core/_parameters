#autoload

# This should be used to complete parameter names if you need some of the
# extra options of compadd. It completes only non-local parameters. All
# arguments are given to compadd.

if zmodload -e parameter; then
  setopt localoptions extendedglob
  compadd "$@" - ${(k)parameters[(R)^*local*]}
else
  compadd "$@" - ${${${(f)"$(typeset +)"}:#*local *}##* }
fi
