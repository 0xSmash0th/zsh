#compdef chown chgrp

local suf

if [[ CURRENT -eq 2 || CURRENT -eq 3 && $words[CURRENT-1] = -* ]]; then
  if [[ $service = chgrp ]] || compset -P '*[:.]'; then
    _groups
  else
    if [[ $OSTYPE = (solaris*|hpux*) ]]; then
      suf=':'
    else
      suf='.'
    fi
    compset -S '.*' && unset suf
    _users -S "$suf" -q
  fi
else
  _files
fi
