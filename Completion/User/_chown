#compdef chown chgrp

if [[ CURRENT -eq 2 || CURRENT -eq 3 && $words[CURRENT-1] = -* ]]; then
  if [[ $words[1] = chgrp ]] || compset -P '*[:.]'; then
    _groups
  else
    local expl

    _description expl user

    if [[ $OSTYPE = (solaris*|hpux*) ]]; then
      compgen "$expl[@]" -u -S ':' -q
    else
      compgen "$expl[@]" -u -S '.' -q
    fi
  fi
else
  _files
fi
