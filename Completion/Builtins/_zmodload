#defcomp zmodload

local fl="$words[2]"

if [[ "$fl" = -*(a*u|u*a)* || "$fl" = -*a* && -position 4 -1 ]]; then
  compgen -B
elif [[ "$fl" = -*u* ]]; then
  compgen -s '$(zmodload)'
else
  compgen -s '${^module_path}/*(N:t:r)'
fi
