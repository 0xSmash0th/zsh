#compdef stat

local expl ret=1

if [[ "$words[CURRENT-1]" = -[AH] ]]; then
  _arrays
else
  _tags files options || return 1

  while _tags; do
    _requested files && _files && ret=0
    _requested options expl 'inode element' &&
        { ! zstyle -t ":completion${curcontext}:options" prefix-needed ||
          [[ "$PREFIX[1]" = + || ret -eq 1 ]] } &&
        compadd "$expl[@]" - +device +inode +mode +nlink +uid +gid +rdev \
                             +size +atime +mtime +ctime +blksize +block +link
    fi
  done
fi
