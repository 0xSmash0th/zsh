2000-06-26  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* unposted: Src/builtin.c, Src/utils.c: move read_poll to utils.c
	as suggested by Bart.

2000-06-26  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12076: Completion/Core/compinstall: overwrote file if no
	style information; overwrote symbolic link instead of following;
	didn't check file name for sanity.

2000-06-26  Bart Schaefer  <schaefer@zsh.org>

	* 12074: Doc/Zsh/builtins.yo, Doc/Zsh/manual.yo: Remove one more
	reference to compfmt; add missing menu items to node listing.

2000-06-26  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12073: Src/builtin.c, Src/utils.c, Doc/Zsh/builtins.yo: first
	pass at `read -t' which tests for availability of input before
	inputting.

2000-06-26  Sven Wischnowsky  <wischnow@zsh.org>

	* 3208: Completion/User/_use_lo: default completion even if there
 	are options
	
	* 12070: Completion/Core/_ignored: fix for completer lookup in
 	_ignored
	
	* 12068: Doc/Zsh/mod_computil.yo, Src/Zle/computil.c: remove
 	compfmt; a bit of explanation for compfiles and compgroups
	
	* 12067: Completion/Core/_history, Src/Zle/zle_tricky.c: typo in
 	_history; missing free()s in zle_tricky.c
	
	* 12066: Src/Zle/computil.c: missing allocation of list for option
 	arguments
	
2000-06-25  Bart Schaefer  <schaefer@zsh.org>

	* 12063: Doc/Zsh/builtins.yo, Doc/Zsh/compwid.yo,
	Doc/Zsh/mod_computil.yo, Doc/Zsh/mod_zutil.yo: Fix typos; assorted
	clarification and reformatting.

2000-06-23  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12044: Src/builtin.c:  read -A assigned an unnecessary null
	if there was trailing whitespace; careful of distinction between
	whitespace and non-whitespace field separators.

2000-06-23  Sven Wischnowsky  <wischnow@zsh.org>

	* 12041,12043 : Completion/Core/compinit: even more compinit stuff,
 	change prompt, search for insecure parent dirs
	
2000-06-22  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 12040: Src/builtin.c: typeset -r on existing parameter set
	the readonly flag before assigning any value on the same command
	line.

2000-06-22  Bart Schaefer  <schaefer@zsh.org>

	* 12039: Test/comptest: Use "compinit -u" to avoid a possible
	prompt about security of the directories; point ZDOTDIR into
	the temporary test directory for the .zcompdump file.

2000-06-22  Sven Wischnowsky  <wischnow@zsh.org>

	* 12033: Completion/Core/compinit: followup to compinit-security
 	patch
	
	* 12029: Completion/Builtins/_arrays, Completion/Builtins/_zstyle,
 	Completion/Commands/_bash_completions,
 	Completion/Commands/_history_complete_word,
 	Completion/Core/_history, Completion/Core/_main_complete,
 	Completion/Core/_parameters, Completion/Core/_setup,
 	Completion/Core/_tags, Completion/Debian/_apt,
 	Completion/X/_x_extension, Doc/Zsh/compsys.yo, Doc/Zsh/compwid.yo,
 	Src/zsh.h, Src/Zle/compcore.c, Src/Zle/compctl.c,
 	Src/Zle/complist.c, Src/Zle/computil.c: allow subscripts for
 	compadd -[ak]; new style for history completion; better
 	list-colors handling
	
2000-06-22  Clint Adams  <schizo@debian.org>

	* 12027: Completion/User/_mailboxes: fix splitting problem in
	12024, add intelligence for mutt mailboxes in $maildirectory
	not specified in muttrc.

	* 12024: Completion/User/_mailboxes: handle multiple mailboxes
	lines in muttrc.

2000-06-21  Chmouel Boudjnah  <chmouel@mandrakesoft.com>

	* 12019: Completion/User/_ssh: upgrade to the last openssh
	options.

2000-06-21  Sven Wischnowsky  <wischnow@zsh.org>

	* 12011: Completion/Commands/_history_complete_word,
 	Completion/Core/_expand, Completion/Core/_history: make history
 	completion use I{PREF,SUF}FIX
	
2000-06-20  Oliver Kiddle  <opk@zsh.org>

	* unposted: Src/exec.c: AIX dependency fix

2000-06-20  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12000: Functions/Misc/zmv: emulate zsh doesn't unset MARKDIRS,
	so use emulate -R.

2000-06-20  Sven Wischnowsky  <wischnow@zsh.org>

	* 11998: Completion/Builtins/_pids, Completion/Core/compdump,
 	Completion/Core/compinit, Doc/Zsh/compsys.yo: a bit of security
 	for compinit (avoid using things writable by others); avoid
 	handling files with the same name twice; remove compconf
	
2000-06-19  Sven Wischnowsky  <wischnow@zsh.org>

	* 11992: Src/Zle/complist.c: make undo break out of menu selection
 	if nothing to undo inside it
	
	* 11985: Completion/Debian/_dpkg, Doc/Zsh/compsys.yo,
	Src/Zle/computil.c: _arguments: small fix for -s and new `!...' for
	things not to complete (but to understand)
	
	* 11982: Test/comptest: update comptest to not set ZLS_COLORS
 	directly
	
	* 11981: Src/Zle/computil.c: more careful when optimising patterns
 	in compfiles
	
	* 11977: Completion/Core/_options, Completion/Core/_set_options,
 	Completion/Core/_unset_options, Doc/Zsh/compwid.yo,
 	Src/Zle/comp.h, Src/Zle/complete.c, Src/Zle/compmatch.c,
 	Test/54compmatch.ztst: new match spec characters bBeE, match only
 	word/line not both
	
	* 11973: Completion/Builtins/_zstyle, Completion/Core/_description,
 	Completion/Core/_expand, Doc/Zsh/compsys.yo, Src/Zle/zle_tricky.c:
 	allow _expand to expand braces; better detection of braces to
 	complete instead of passing to shell code
	
2000-06-19  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* unpost: additions to Completion/Commands/.distfiles and
	.distfiles.

	* users/3189: Functions/Misc/zmv:  use depth-first ordering with
	**/; ignore files whose names are unchanged by the substitution.

2000-06-19  Sven Wischnowsky  <wischnow@zsh.org>

	* 11971: Completion/Core/_path_files, Doc/Zsh/compsys.yo,
 	Src/Zle/compcore.c, Src/Zle/computil.c: improve filename
 	completion; use accept-exact for in-path completion; new fake style
	
	* users/3188: Completion/Core/_description, Completion/Core/_setup,
 	Doc/Zsh/compsys.yo: restore ZLS_COLORS when possible; better
 	group-name handling in ZLS_COLORS
	
2000-06-17  Clint Adams  <schizo@debian.org>

	* 11966: Completion/Core/_main_complete: use double brackets
	around comparison to prevent 'command not found: no' error.

2000-06-17  Bart Schaefer  <schaefer@zsh.org>

	* 11961: Src/subst.c: 11959 was really a bug in magicequalsubst,
	it shouldn't have treated x:=y as a reason to expand =y.

2000-06-17  Tanaka Akira  <akr@zsh.org>

	* 11959: Completion/User/_urls: make it magicequalsubst aware.

	* 11958: Completion/User/_java: new completion for Java.

2000-06-17  Bart Schaefer  <schaefer@zsh.org>

	* 11956: Src/loop.c: Fix off-by-one error in wordcode pc executing
	case statement fall-through.

	* unposted: Test/01grammar.ztst: Add a test for 11956.

2000-06-16  Clint Adams  <schizo@debian.org>

	* 11951: Completion/Debian/_dpkg: replaced _arguments -A
	for install and record-avail  with an evaluation kludge.

2000-06-16  Sven Wischnowsky  <wischnow@zsh.org>

	* 11939: Src/Zle/compmatch.c, Src/Zle/compresult.c,
	Src/Zle/zle_tricky.c: allow completion after `a{{b,c},'; fix for
	closing brace re-insertion when completing from both ends
	(CLF_MID)
	
	* 11938: Completion/Core/_description, Doc/Zsh/compsys.yo: enhance
 	ignore-line to ignore all/current/other word(s)
	
	* 11937: Completion/Core/_expand, Completion/Core/_list,
 	Doc/Zsh/compsys.yo, Doc/Zsh/mod_zutil.yo, Src/Modules/zutil.c:
 	zstyle -e option; change math-styles to boolean ones; change
 	defaults for _expand styles
	
2000-06-15  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* Felix: 11908: Test/54compmatch.ztst: tests for problematic
	cases.

	* as 11916: moved bottom of ChangeLog to ChangeLog-Release to
	avoid unnecessary network activity when committing.  To be
	merged into ChangeLog.4.0 for next release.

2000-06-15  Sven Wischnowsky  <wischnow@zsh.org>

	* 11924: Src/Zle/compmatch.c: more security in completion matching
	
	* 11915: Completion/Core/_files, Doc/Zsh/compsys.yo: make _files
 	try each pattern only once (and stop after `*')
	
	* 11910: Src/Zle/computil.c: fix for _arguments, it took
 	non-option strings as options
	
2000-06-14  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 11906: Src/signals.c: yet another two bugs with saving traps:
	flags were prematurely restored when resetting and TRAPEXIT
	was sometimes saved incorrectly when exitting the scope.

2000-06-14  Oliver Kiddle  <opk@zsh.org>

	* 11903: Completion/Core/_expand: handle suffix style for arrays

2000-06-14  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 11902: Test/08traps.ztst: add test for localtraps with SIGWINCH.

	* 11901: Src/signals.c: not one but two more bugs in trap
	saving: sigfuncs wasn't reset for function signals, and dosavetrap()
	didn't check sigtrapped before assuming sigfuncs was valid.

	* 11895: Src/signals.c: exit traps weren't cleared from the
	list properly, resulting in memory management problems.

2000-06-14  Sven Wischnowsky  <wischnow@zsh.org>

	* 11885: Src/parse.c: nix kaboom with `time time'
	
	* 11890: Src/Zle/complist.c: better fix for menu selection on dumb 
	terminal
	
2000-06-13  Clint Adams  <schizo@debian.org>

	* 11882: Completion/Debian/_dpkg: more intelligence in
	dpkg completion.

2000-06-13  Sven Wischnowsky  <wischnow@zsh.org>

	* 11876: Doc/Zsh/compsys.yo, Src/Zle/computil.c: make -A take a
	pattern as argument to match non-arguments; allow single-letter
	option strings to have multiple arguments; fix to allow option
	completion with multiple sets
	
	* 11872 Completion/Commands/_generic, Doc/Zsh/compsys.yo: new
	_generic widget to call completion with $WIDGET in function field
	of context
	
	* 11873: Completion/Core/_main_complete, Doc/Zsh/compsys.yo: allow 
	insert-tab style to contain `pending[=num]' to handle the case
	when there is pending input

	* 11874: Completion/Core/_expand, Doc/Zsh/compsys.yo: new style
	`suffix', use accept-exact style in _expand
	
	* 11875: Src/Zle/complist.c: fix for longer capability strings;
	very bad

2000-06-13  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 11877: Src/zsh.h: make PRINT_ flags unique again.

2000-06-13  Sven Wischnowsky  <wischnow@zsh.org>

	* 11870: Completion/Core/_path_files, Src/Zle/complete.c,
 	Src/Zle/compmatch.c, Src/Zle/computil.c: fixes for calling
	compfiles, for completing words with special characters; make
	compfiles optimisations work with globcomplete and simple match
	specs

2000-06-12  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 11867: Src/builtin.c, Src/params.c, Src/zsh.h,
	Doc/Zsh/builtins.yo: don't use -H flag for parameters mentioned
	explicitly or by pattern.

2000-06-11  Bart Schaefer  <schaefer@zsh.org>

	* 11866: Functions/Misc/colors, Functions/Prompts/promptinit:  Set
	up color/colour assoc arrays to map the full range of ANSI text
	properties; preserve more state during themed prompt previewing.

	* Alexandre: 11864: Src/Zle/complist.c: Shift an array the opposite
	way to fix colored listings crash.

2000-06-11  Tanaka Akira  <akr@zsh.org>

	* 11861: Completion/User/_cvs: fix -a use for compadd.

2000-06-10  Bart Schaefer  <schaefer@zsh.org>

	* 11850: Src/Zle/complist.c: Don't try to menuselect in a listing
	that isn't there, e.g., because the TERM is too dumb to draw it.

2000-06-09  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 11842 (repeat of 11838): Doc/Zsh/builtins.yo, Src/builtin.c,
	Src/params.c, Src/subst.c, Src/zsh.h, Src/Modules/mapfile.c,
	Src/Modules/parameter.c: add the HIDEVAL parameter attribute and
	set it by default for parameters created by the mapfile and
	parameter modules, to restore sanity of `typeset' output.

2000-06-09  Clint Adams  <schizo@debian.org>

	* 11839: Src/signals.c: prevent segmentation fault in
	endtrapscope() by not dereferencing null pointers.

2000-06-09  Sven Wischnowsky  <wischnow@zsh.org>

	* 11836: Src/Zle/compcore.c, Src/Zle/complist.c: fix for
 	menu-completion when another completion came right after it
	
	* 11833: Completion/Core/_path_files, Src/Zle/computil.c: improve
 	_path_files, move some code into C, try to optimise glob patterns
 	and immediately accept exact directory matches
	
2000-06-08  Oliver Kiddle  <opk@zsh.org>

	* 11823: Doc/Makefile.in, Completion/User/_urls: avoid bug in
	IRIX's sed and use new -K option to zparseopts in _urls

2000-06-08  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* pws: 11820: Src/main.c: metafication of command line arguments
	didn't work because type table wasn't set up.

2000-06-08  Sven Wischnowsky  <wischnow@zsh.org>

	* 11817: Src/Zle/compmatch.c: more anchor matching fixes
	
	* 11815: Completion/Core/_expand, Doc/Zsh/compsys.yo: trying to
 	improve _expand; new keep-prefix style, add-space gives more control
	
	* 11814: Src/Zle/zle_tricky.c: make C-code expansion add a space
 	only when more than one word was generated
	
2000-06-08  Tanaka Akira  <akr@zsh.org>

	* users/3130: Completion/Debian/_apt: fix actions for _alternative.

2000-06-07  Sven Wischnowsky  <wischnow@zsh.org>

	* 11796: Src/Zle/compmatch.c: try to get the tests for `strings
 	long enough' right in anchor matching code
	
2000-06-07  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 11711: Andrej Borsenkow: Test/ztst.zsh: Ignore diff output
	unless the test failed, to work around some diffs which produce
	success messages.

2000-06-07  Sven Wischnowsky  <wischnow@zsh.org>

	* user/3124: Completion/Core/_normal, Src/Zle/compctl.c: optimise
 	command lookup in old and new completion
	
	* 11794: Src/Zle/compcore.c, Src/Zle/complist.c, Src/Zle/zle_tricky.c:
 	hopefully more consistent beeping with menu-selection
	
	* 11792: Doc/Zsh/mod_zutil.yo, Src/Modules/zutil.c: -K option for
 	zparseopts to keep previous array values
	
	* 11789: Completion/Commands/_correct_word,
 	Completion/Commands/_expand_word, Completion/Commands/_next_tags:
 	setup options in bindable commands
	
2000-06-06  Oliver Kiddle  <opk@zsh.org>

	* 11772: Completion/User/_urls: improvements to 11756 suggested by
	Bart in 11763 

2000-06-06  Sven Wischnowsky  <wischnow@zsh.org>

	* 11777: Completion/Core/_expand: make _expand ignore empty
 	expansions
	
	* 11776: Completion/Core/_path_files: fix for _path_files and
 	globcomplete, better test if word contains wildcards
	
	* 11768: Doc/Zsh/expn.yo, Src/lex.c, Src/subst.c: make (e) flag be
 	silent unless (X) is given, too
	
2000-06-05  Oliver Kiddle  <opk@zsh.org>

	* 11756: Completion/User/_urls, Completion/Linux/_rpm: accept -g
	option in _urls and use _urls in _rpm

	* 11755: test/comptest: fix wording in error messages
