2000-07-26  Bart Schaefer  <schaefer@zsh.org>

	* 12377: Completion/Core/compaudit, Completion/Core/compinit,
	Doc/Zsh/compsys.yo: Separate compinit security checks into their
	own callable function.

	* 12370: Functions/Misc/zed: Add a context for controlling
	completion within zed, and a style to enable tab insertion at the
	beginnings of lines in zed by default.
	
	* 12162: Completion/Core/_expand, Completion/Core/_path_files,
	Src/utils.c: Use `eval' instead of `$(print ...)' to suppress
	some syntax error failures; this requires that zwarn() does not
	trashzle() when the output is not going to the terminal.
	
2000-07-26  Sven Wischnowsky  <wischnow@zsh.org>

	* 12378: Completion/Base/_arguments: make `_arguments --' use
 	specs after the `--' even for options not described in the help
 	output to get arguments
	
	* users/3337: Completion/Base/_value: allow _value:<assoc> functions to
 	override completion for all keys of an assoc
	
2000-07-24  Oliver Kiddle  <opk@zsh.org>

	* 12356: Completion/User/_mh: use mhpath and mhparam instead of
	guessing the directory

2000-07-24  Sven Wischnowsky  <wischnow@zsh.org>

	* 12354: Completion/Core/_multi_parts: optimisations for
 	_multi_parts
	
2000-07-22  Clint Adams  <schizo@debian.org>

	* 12347: Completion/User/_mutt: options -a, -b, and -c are
	repeatable.

2000-07-21  Sven Wischnowsky  <wischnow@zsh.org>

	* 12337: Src/parse.c: fix parsing of `time' without a command
	
2000-07-20  Wayne Davison  <wayned@users.sourceforge.net>

	* unposted: tweaked a function name in hist.c for Sven.

2000-07-20  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12239: Fr. Br. George (George V Kouryachy), adapted:
	configure.in: prefer curses to termcap on solaris.

2000-07-20  Bart Schaefer  <schaefer@zsh.org>

	* 12326: Completion/User/_cvs: Discard stderr of a command subst.

2000-07-20  Wayne Davison  <wayned@users.sourceforge.net>

	* 12323: Src/hist.c: support "builtin" in HIST_NO_STORE check.

2000-07-19  Chmouel Boudjnah  <chmouel@mandrakesoft.com>

	* 12319: Completion/User/_perl_builtin_funcs: Get also /usr/share/man.

2000-07-19  Wayne Davison  <wayned@users.sourceforge.net>

	* 12318: Doc/Zsh/options.yo, Src/builtin.c, Src/exec.c, Src/hist.c,
	Src/init.c, Src/lex.c, Src/parse.c, Src/Zle/zle_main.c: Removed
	remhist() and the HA_JUNKED flag.  Now hend() is called with an
	Eprog pointer so that it can access the lexer's data for the
	current command.  Added shouldIgnoreLine() so that hend() can
	determine in advance if a command should be saved in the history.
	Added the aliasspaceflag variable to note when we expand an alias
	that starts with a space.

2000-07-19  Sven Wischnowsky  <wischnow@zsh.org>

	* 12314: Src/Zle/compmatch.c: a bit of security for a VARARR()
	
2000-07-19  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12313: Doc/Zsh/metafaq.yo: bad phrasing corrected.

	* 12308: Completion/User/_man: Andrej and pws: cope with systems
	where manual pages just have bare .Z and no number; don't be
	too clever about suffix until we try to strip it.

2000-07-18  Sven Wischnowsky  <wischnow@zsh.org>

	* 12297: Src/Zle/compcore.c: don't let duplicate matches keep us
 	from recognising exact matches if they produce the same string on
 	the line
	
2000-07-18  Wayne Davison  <wayned@users.sourceforge.net>

	* 12295: Src/builtin.c, Src/hist.c, Src/input.c, Src/lex.c: Fixed
	the history command to output correctly when the current command was
	already removed from the history.  Fixed remhist() to not remove
	the wrong line in the above scenario.  Got rid of "spaceflag".

2000-07-17  Tanaka Akira  <akr@zsh.org>

	* 12274: Test/53completion.ztst, Test/55arguments.ztst,
	Test/.distfiles: separates _arguments tests.

2000-07-17  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* Config/version.mk: 3.1.9-dev-3.

2000-07-17  Sven Wischnowsky  <wischnow@zsh.org>

	* 12266: Src/Zle/computil.c: don't treat non-option arguments as
 	options
	
2000-07-17  Wayne Davison  <wayned@users.sourceforge.net>

	* 12265: Src/hist.c: Fixed gethistent().  Fixed a race condition
	in the SHARE_HISTORY code that could fail to import some shared
	history lines from other shells.

2000-07-16  Wayne Davison  <wayned@users.sourceforge.net>

	* 12260: Src/hist.c: Added unmeta() calls.  Fixed lockhistfile().

2000-07-13  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12247: Src/init.c, Src/params.c, Src/prompt.c: remove hostnam
	internal variable and use $HOST wherever hostname is needed.

	* 12242: Fr. Br. George (George V Kouryachy) and pws:
	Doc/Zsh/prompt.yo, Src/prompt.c: negative integers in prompt
	escapes count from the other end of the appropriate string.

2000-07-13  Sven Wischnowsky  <wischnow@zsh.org>
	
	* 12243: Src/hist.c: try to get (z) parameter flag parsing for
 	conditions right

	* 12241: Completion/Core/_main_complete, Src/Zle/computil.c: fix
 	for _arguments with single-letter options: recognize
 	option-strings with multiple options; in _main_complete stop
 	trying completers when one called _message, don't display warnings
 	in such cases
	
	* 12238: Src/Zle/zle_thingy.c: fix zle widget -n num with num>9
	
	* 12237: Src/hist.c, Src/lex.c: slightly improved (z) flag for
 	parsing conditions; recognising glob flags in conditions still
 	doesn't work
	
2000-07-12  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12231: Completion/Core/compinstall: fix setting of list-prompt.

2000-07-12  Sven Wischnowsky  <wischnow@zsh.org>

	* 12229: Doc/Zsh/compsys.yo: fix for list-prompt docs
	
	* 12228: Src/hist.c, Src/lex.c: fix for (z) flag, don't take # as
 	comment
	
2000-07-12  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12227: Completion/Core/compinstall: add select-prompt handling
	and correct menu entry and missing local parameters.

2000-07-12  Sven Wischnowsky  <wischnow@zsh.org>

	* 12226: Completion/Core/_main_complete: don't start menu
 	selection with only select=long
	
	* 12225: Completion/Linux/_rpm: check if options were completed
	
2000-07-11  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12222: Src/exec.c: ignore EINTR in helper processe for
	tee and cat with multios.  It might be considered unfortunate
	that the shell is liable to exit on SIGPIPE if these disappear
	early.

	* 12220: Src/exec.c: print error message for unfound autoload
	function body at lower locallevel.

2000-07-10  Bart Schaefer  <schaefer@zsh.org>

	* unposted: Completion/User/_killall: Complete process IDs and
	names for all processes when EUID is 0 (root); suggested by
	Thomas Kohler in 12202 and followups.

2000-07-10  Sven Wischnowsky  <wischnow@zsh.org>

	* 12208: Completion/Core/_path_files: avoid insertion of `+'
 	before ~1/<TAB>; don't use undeclared local $tmp
	
2000-07-08  Tanaka Akira  <akr@zsh.org>

	* 12201: Completion/User/_java: fix completion for jar. complete
	package qualified class names. fix typos.

2000-07-07  Bart Schaefer  <schaefer@zsh.org>

	* 12193: configure.in, Src/Builtins/rlimits.mdd: Fix unnecessary
	rebuilds of rlimits.o on platforms where getrlimit() is not found.

2000-07-06  Oliver Kiddle  <opk@zsh.org>

	* 12181: Completion/AIX/_lscfg, Completion/AIX/_object_classes,
	Completion/AIX/_physical_volumes, Completion/AIX/_smit,
	Completion/AIX/_volume_groups, Completion/User/_printers: updates
	and additions to completions for AIX commands

2000-07-05  Oliver Kiddle  <opk@zsh.org>

	* 12177: Doc/Zsh/compsys.yo, Completion/Builtins/_unhash,
	Doc/Zsh/compwid.yo, Doc/Zsh/expn.yo, Doc/Zsh/mod_zutil.yo: add more
	standard tags to docs and fix typos

2000-07-05  Sven Wischnowsky  <wischnow@zsh.org>

	* 12171: Completion/User/_arp: get return status right
	
2000-07-05  Bart Schaefer  <schaefer@zsh.org>

	* 12167: Test/Makefile.in: Ignore failure exit from "for" loop
	so that cleanup code following it will be executed.

2000-07-04  Oliver Kiddle  <opk@zsh.org>

	* 12165: Completion/User/_arp: new completion for arp

2000-07-04  Bart Schaefer  <schaefer@zsh.org>

	* 12160: Completion/Core/compdump: Return failure early if the
	dot-file directory is not writable.

2000-07-04  Oliver Kiddle  <opk@zsh.org>

	* unposted: Src/params.c, Src/Zle/compcore.c, Src/Zle/zle_utils.c:
	AIX dependency fixes

2000-07-04  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12158: Src/Modules/parameter.c: cast pid_t to int for printing.

2000-07-04  Sven Wischnowsky  <wischnow@zsh.org>

	* 12156: Completion/Core/_expand, Completion/Core/_path_files: add
 	some $(print...)s because of possible math-parse errors

2000-07-03  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12149: acconfig.h, configure.in, Src/Modules/zftp.c:
	h_errno wasn't found on HPUX 10.20.  Maybe in some library.
	
2000-07-03  Adam Spiers  <adam@spiers.net>

	* 12152: Completion/User/_perl: tweak completion of Perl script
	parameters to perl.

2000-07-03  Bart Schaefer  <schaefer@zsh.org>

	* 12151: Test/Makefile.in, Test/comptest: Point ZDOTDIR into the
	Test directory itself, and clean up .zcompdump after testing.

	* 12148: Completion/Core/_path_files: Followup to 12133 as
	suggested by Sven in 12137: Don't merge display-ordering glob
	flags into the parens in $(...) expressions.

2000-07-03  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12146: Doc/Makefile.in: reintroduce mysteriously disappeared
	code do install info files in directory.

	* 12140: Completion/Core/compinit, Completion/Core/compinstall,
	Doc/Zsh/compsys.yo: compinstall calls compinit after styles
	are defined; compinit checks for _expand completer and if
	necessary rebinds ^i to complete-word.

	* Config/version.mk: 3.1.9-dev-2.

	* 12138: Src/params.c, Test/06arith.ztst: setting of array
	elements in math context didn't work (ever). 

	* 12121: Src/utils.c, Doc/Zsh/options.yo: save and restore stopmsg
	for precmd, fix #ifdef's for variable declaration in read_poll().

2000-07-03  Sven Wischnowsky  <wischnow@zsh.org>

	* 12134: Completion/Core/_main_complete, Doc/Zsh/compsys.yo,
 	Doc/Zsh/mod_complist.yo, Src/Zle/comp.h, Src/Zle/compcore.c,
 	Src/Zle/complist.c: change format style with warnings tag, don't
 	add descriptions as matches; make a-a-i-n-h in menu selection work
 	even without matches
	
2000-07-02  Bart Schaefer  <schaefer@zsh.org>

	* 12133: Completion/Core/_expand, Completion/Core/_path_files:
	Discard error output from parameter expansions and use "eval" to
	protect the completion system from parse errors and other garbage
	in the strings taken from the command line.

2000-06-29  Sven Wischnowsky  <wischnow@zsh.org>

	* 12125: Src/parse.c, Test/09funcdef.ztst: fix for `foo () print
 	bar' (function definitions without braces)
	
	* 12122: Completion/Core/_main_complete: reverse meaning of yes=num
 	again

	* 12119: Completion/Core/_complete, Completion/Core/_normal: try
 	to return the right value
	
	* 12118: Completion/Core/_expand: don't expand partially typed
 	parameter expansions
	
	* 12115: Completion/Core/_expand, Doc/Zsh/compsys.yo: change
 	suffix style to still do expansion if the suffix contains
 	something to expand
	
	* 12114: Completion/Core/_main_complete, Doc/Zsh/compsys.yo: even
 	more fun with the menu style (no=num, yes=long-list, reverse
 	meaning of yes=num)
	
	* 12113: Completion/Core/_expand, Src/Zle/zle_tricky.c: quote
 	brace-strings
	
2000-06-28  Bart Schaefer  <schaefer@zsh.org>

	* 12112: Src/params.c: Don't make namedirs out of hash elements.

2000-06-28  Sven Wischnowsky  <wischnow@zsh.org>

	* 12109: Completion/Core/_complete: make _complete return the
 	right value
	
	* 12107: Completion/Core/_setup, Src/Zle/complist.c: fix for
 	list-colors handling
	
	* 12105: Completion/Core/_main_complete: reset _comp_mesg (saying
 	whether there were messages) appropriately
	
	* Jan Fedak: 12097: Completion/User/_ssh: use _ports when
	completing remote ports

	* Andrej: 12094: Doc/Zsh/compsys.yo: a bit of cleanup

	* 12099: Completion/Core/_oldlist: make _oldlist not use the dummy
 	match added for the warning
	
	* 12093: Src/Zle/compcore.c, Src/Zle/complist.c, Src/Zle/compresult.c:
 	make a-a-i-n-h in menu selection work with one match; better undo
 	behaviour for menu selection
	
2000-06-27  Bart Schaefer  <schaefer@zsh.org>

	* 12086: Doc/Zsh/compsys.yo: Move _use_lo doc into alphabetical
	order; separate _files and _path_files for same reason.

2000-06-27  Sven Wischnowsky  <wischnow@zsh.org>

	* users/3219: Completion/Core/_main_complete, Doc/Zsh/compsys.yo:
	menu style accepts yes=x to start menu completion if there are at
	least x matches
	
	* Andrej: 12084: Src/Modules/zpty.c: don't close slave if not yet open

	* 12082: Doc/Zsh/compsys.yo: document _use_lo
	
2000-06-27  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* Andrej: 12081: Src/Modules/zpty.c: compiles under Cygwin, but
	still glitches.

2000-06-26  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* unposted: Src/builtin.c, Src/utils.c: move read_poll to utils.c
	as suggested by Bart.

2000-06-26  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12076: Completion/Core/compinstall: overwrote file if no
	style information; overwrote symbolic link instead of following;
	didn't check file name for sanity.

2000-06-26  Bart Schaefer  <schaefer@zsh.org>

	* 12074: Doc/Zsh/builtins.yo, Doc/Zsh/manual.yo: Remove one more
	reference to compfmt; add missing menu items to node listing.

2000-06-26  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12073: Src/builtin.c, Src/utils.c, Doc/Zsh/builtins.yo: first
	pass at `read -t' which tests for availability of input before
	inputting.

2000-06-26  Sven Wischnowsky  <wischnow@zsh.org>

	* users/3208: Completion/User/_use_lo: default completion even if
	there are options
	
	* 12070: Completion/Core/_ignored: fix for completer lookup in
 	_ignored
	
	* 12068: Doc/Zsh/mod_computil.yo, Src/Zle/computil.c: remove
 	compfmt; a bit of explanation for compfiles and compgroups
	
	* 12067: Completion/Core/_history, Src/Zle/zle_tricky.c: typo in
 	_history; missing free()s in zle_tricky.c
	
	* 12066: Src/Zle/computil.c: missing allocation of list for option
 	arguments
	
2000-06-25  Bart Schaefer  <schaefer@zsh.org>

	* 12063: Doc/Zsh/builtins.yo, Doc/Zsh/compwid.yo,
	Doc/Zsh/mod_computil.yo, Doc/Zsh/mod_zutil.yo: Fix typos; assorted
	clarification and reformatting.

2000-06-23  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12044: Src/builtin.c:  read -A assigned an unnecessary null
	if there was trailing whitespace; careful of distinction between
	whitespace and non-whitespace field separators.

2000-06-23  Sven Wischnowsky  <wischnow@zsh.org>

	* 12041,12043 : Completion/Core/compinit: even more compinit stuff,
 	change prompt, search for insecure parent dirs
	
2000-06-22  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 12040: Src/builtin.c: typeset -r on existing parameter set
	the readonly flag before assigning any value on the same command
	line.

2000-06-22  Bart Schaefer  <schaefer@zsh.org>

	* 12039: Test/comptest: Use "compinit -u" to avoid a possible
	prompt about security of the directories; point ZDOTDIR into
	the temporary test directory for the .zcompdump file.

2000-06-22  Sven Wischnowsky  <wischnow@zsh.org>

	* 12033: Completion/Core/compinit: followup to compinit-security
 	patch
	
	* 12029: Completion/Builtins/_arrays, Completion/Builtins/_zstyle,
 	Completion/Commands/_bash_completions,
 	Completion/Commands/_history_complete_word,
 	Completion/Core/_history, Completion/Core/_main_complete,
 	Completion/Core/_parameters, Completion/Core/_setup,
 	Completion/Core/_tags, Completion/Debian/_apt,
 	Completion/X/_x_extension, Doc/Zsh/compsys.yo, Doc/Zsh/compwid.yo,
 	Src/zsh.h, Src/Zle/compcore.c, Src/Zle/compctl.c,
 	Src/Zle/complist.c, Src/Zle/computil.c: allow subscripts for
 	compadd -[ak]; new style for history completion; better
 	list-colors handling
	
2000-06-22  Clint Adams  <schizo@debian.org>

	* 12027: Completion/User/_mailboxes: fix splitting problem in
	12024, add intelligence for mutt mailboxes in $maildirectory
	not specified in muttrc.

	* 12024: Completion/User/_mailboxes: handle multiple mailboxes
	lines in muttrc.

2000-06-21  Chmouel Boudjnah  <chmouel@mandrakesoft.com>

	* 12019: Completion/User/_ssh: upgrade to the last openssh
	options.

2000-06-21  Sven Wischnowsky  <wischnow@zsh.org>

	* 12011: Completion/Commands/_history_complete_word,
 	Completion/Core/_expand, Completion/Core/_history: make history
 	completion use I{PREF,SUF}FIX
	
2000-06-20  Oliver Kiddle  <opk@zsh.org>

	* unposted: Src/exec.c: AIX dependency fix

2000-06-20  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 12000: Functions/Misc/zmv: emulate zsh doesn't unset MARKDIRS,
	so use emulate -R.

2000-06-20  Sven Wischnowsky  <wischnow@zsh.org>

	* 11998: Completion/Builtins/_pids, Completion/Core/compdump,
 	Completion/Core/compinit, Doc/Zsh/compsys.yo: a bit of security
 	for compinit (avoid using things writable by others); avoid
 	handling files with the same name twice; remove compconf
	
2000-06-19  Sven Wischnowsky  <wischnow@zsh.org>

	* 11992: Src/Zle/complist.c: make undo break out of menu selection
 	if nothing to undo inside it
	
	* 11985: Completion/Debian/_dpkg, Doc/Zsh/compsys.yo,
	Src/Zle/computil.c: _arguments: small fix for -s and new `!...' for
	things not to complete (but to understand)
	
	* 11982: Test/comptest: update comptest to not set ZLS_COLORS
 	directly
	
	* 11981: Src/Zle/computil.c: more careful when optimising patterns
 	in compfiles
	
	* 11977: Completion/Core/_options, Completion/Core/_set_options,
 	Completion/Core/_unset_options, Doc/Zsh/compwid.yo,
 	Src/Zle/comp.h, Src/Zle/complete.c, Src/Zle/compmatch.c,
 	Test/54compmatch.ztst: new match spec characters bBeE, match only
 	word/line not both
	
	* 11973: Completion/Builtins/_zstyle, Completion/Core/_description,
 	Completion/Core/_expand, Doc/Zsh/compsys.yo, Src/Zle/zle_tricky.c:
 	allow _expand to expand braces; better detection of braces to
 	complete instead of passing to shell code
	
2000-06-19  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* unpost: additions to Completion/Commands/.distfiles and
	.distfiles.

	* users/3189: Functions/Misc/zmv:  use depth-first ordering with
	**/; ignore files whose names are unchanged by the substitution.

2000-06-19  Sven Wischnowsky  <wischnow@zsh.org>

	* 11971: Completion/Core/_path_files, Doc/Zsh/compsys.yo,
 	Src/Zle/compcore.c, Src/Zle/computil.c: improve filename
 	completion; use accept-exact for in-path completion; new fake style
	
	* users/3188: Completion/Core/_description, Completion/Core/_setup,
 	Doc/Zsh/compsys.yo: restore ZLS_COLORS when possible; better
 	group-name handling in ZLS_COLORS
	
2000-06-17  Clint Adams  <schizo@debian.org>

	* 11966: Completion/Core/_main_complete: use double brackets
	around comparison to prevent 'command not found: no' error.

2000-06-17  Bart Schaefer  <schaefer@zsh.org>

	* 11961: Src/subst.c: 11959 was really a bug in magicequalsubst,
	it shouldn't have treated x:=y as a reason to expand =y.

2000-06-17  Tanaka Akira  <akr@zsh.org>

	* 11959: Completion/User/_urls: make it magicequalsubst aware.

	* 11958: Completion/User/_java: new completion for Java.

2000-06-17  Bart Schaefer  <schaefer@zsh.org>

	* 11956: Src/loop.c: Fix off-by-one error in wordcode pc executing
	case statement fall-through.

	* unposted: Test/01grammar.ztst: Add a test for 11956.

2000-06-16  Clint Adams  <schizo@debian.org>

	* 11951: Completion/Debian/_dpkg: replaced _arguments -A
	for install and record-avail  with an evaluation kludge.

2000-06-16  Sven Wischnowsky  <wischnow@zsh.org>

	* 11939: Src/Zle/compmatch.c, Src/Zle/compresult.c,
	Src/Zle/zle_tricky.c: allow completion after `a{{b,c},'; fix for
	closing brace re-insertion when completing from both ends
	(CLF_MID)
	
	* 11938: Completion/Core/_description, Doc/Zsh/compsys.yo: enhance
 	ignore-line to ignore all/current/other word(s)
	
	* 11937: Completion/Core/_expand, Completion/Core/_list,
 	Doc/Zsh/compsys.yo, Doc/Zsh/mod_zutil.yo, Src/Modules/zutil.c:
 	zstyle -e option; change math-styles to boolean ones; change
 	defaults for _expand styles
	
2000-06-15  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* Felix: 11908: Test/54compmatch.ztst: tests for problematic
	cases.

	* as 11916: moved bottom of ChangeLog to ChangeLog-Release to
	avoid unnecessary network activity when committing.  To be
	merged into ChangeLog.4.0 for next release.

2000-06-15  Sven Wischnowsky  <wischnow@zsh.org>

	* 11924: Src/Zle/compmatch.c: more security in completion matching
	
	* 11915: Completion/Core/_files, Doc/Zsh/compsys.yo: make _files
 	try each pattern only once (and stop after `*')
	
	* 11910: Src/Zle/computil.c: fix for _arguments, it took
 	non-option strings as options
	
2000-06-14  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 11906: Src/signals.c: yet another two bugs with saving traps:
	flags were prematurely restored when resetting and TRAPEXIT
	was sometimes saved incorrectly when exitting the scope.

2000-06-14  Oliver Kiddle  <opk@zsh.org>

	* 11903: Completion/Core/_expand: handle suffix style for arrays

2000-06-14  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 11902: Test/08traps.ztst: add test for localtraps with SIGWINCH.

	* 11901: Src/signals.c: not one but two more bugs in trap
	saving: sigfuncs wasn't reset for function signals, and dosavetrap()
	didn't check sigtrapped before assuming sigfuncs was valid.

	* 11895: Src/signals.c: exit traps weren't cleared from the
	list properly, resulting in memory management problems.

2000-06-14  Sven Wischnowsky  <wischnow@zsh.org>

	* 11885: Src/parse.c: nix kaboom with `time time'
	
	* 11890: Src/Zle/complist.c: better fix for menu selection on dumb 
	terminal
	
2000-06-13  Clint Adams  <schizo@debian.org>

	* 11882: Completion/Debian/_dpkg: more intelligence in
	dpkg completion.

2000-06-13  Sven Wischnowsky  <wischnow@zsh.org>

	* 11876: Doc/Zsh/compsys.yo, Src/Zle/computil.c: make -A take a
	pattern as argument to match non-arguments; allow single-letter
	option strings to have multiple arguments; fix to allow option
	completion with multiple sets
	
	* 11872 Completion/Commands/_generic, Doc/Zsh/compsys.yo: new
	_generic widget to call completion with $WIDGET in function field
	of context
	
	* 11873: Completion/Core/_main_complete, Doc/Zsh/compsys.yo: allow 
	insert-tab style to contain `pending[=num]' to handle the case
	when there is pending input

	* 11874: Completion/Core/_expand, Doc/Zsh/compsys.yo: new style
	`suffix', use accept-exact style in _expand
	
	* 11875: Src/Zle/complist.c: fix for longer capability strings;
	very bad

2000-06-13  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 11877: Src/zsh.h: make PRINT_ flags unique again.

2000-06-13  Sven Wischnowsky  <wischnow@zsh.org>

	* 11870: Completion/Core/_path_files, Src/Zle/complete.c,
 	Src/Zle/compmatch.c, Src/Zle/computil.c: fixes for calling
	compfiles, for completing words with special characters; make
	compfiles optimisations work with globcomplete and simple match
	specs

2000-06-12  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 11867: Src/builtin.c, Src/params.c, Src/zsh.h,
	Doc/Zsh/builtins.yo: don't use -H flag for parameters mentioned
	explicitly or by pattern.

2000-06-11  Bart Schaefer  <schaefer@zsh.org>

	* 11866: Functions/Misc/colors, Functions/Prompts/promptinit:  Set
	up color/colour assoc arrays to map the full range of ANSI text
	properties; preserve more state during themed prompt previewing.

	* Alexandre: 11864: Src/Zle/complist.c: Shift an array the opposite
	way to fix colored listings crash.

2000-06-11  Tanaka Akira  <akr@zsh.org>

	* 11861: Completion/User/_cvs: fix -a use for compadd.

2000-06-10  Bart Schaefer  <schaefer@zsh.org>

	* 11850: Src/Zle/complist.c: Don't try to menuselect in a listing
	that isn't there, e.g., because the TERM is too dumb to draw it.

2000-06-09  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 11842 (repeat of 11838): Doc/Zsh/builtins.yo, Src/builtin.c,
	Src/params.c, Src/subst.c, Src/zsh.h, Src/Modules/mapfile.c,
	Src/Modules/parameter.c: add the HIDEVAL parameter attribute and
	set it by default for parameters created by the mapfile and
	parameter modules, to restore sanity of `typeset' output.

2000-06-09  Clint Adams  <schizo@debian.org>

	* 11839: Src/signals.c: prevent segmentation fault in
	endtrapscope() by not dereferencing null pointers.

2000-06-09  Sven Wischnowsky  <wischnow@zsh.org>

	* 11836: Src/Zle/compcore.c, Src/Zle/complist.c: fix for
 	menu-completion when another completion came right after it
	
	* 11833: Completion/Core/_path_files, Src/Zle/computil.c: improve
 	_path_files, move some code into C, try to optimise glob patterns
 	and immediately accept exact directory matches
	
2000-06-08  Oliver Kiddle  <opk@zsh.org>

	* 11823: Doc/Makefile.in, Completion/User/_urls: avoid bug in
	IRIX's sed and use new -K option to zparseopts in _urls

2000-06-08  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* pws: 11820: Src/main.c: metafication of command line arguments
	didn't work because type table wasn't set up.

2000-06-08  Sven Wischnowsky  <wischnow@zsh.org>

	* 11817: Src/Zle/compmatch.c: more anchor matching fixes
	
	* 11815: Completion/Core/_expand, Doc/Zsh/compsys.yo: trying to
 	improve _expand; new keep-prefix style, add-space gives more control
	
	* 11814: Src/Zle/zle_tricky.c: make C-code expansion add a space
 	only when more than one word was generated
	
2000-06-08  Tanaka Akira  <akr@zsh.org>

	* users/3130: Completion/Debian/_apt: fix actions for _alternative.

2000-06-07  Sven Wischnowsky  <wischnow@zsh.org>

	* 11796: Src/Zle/compmatch.c: try to get the tests for `strings
 	long enough' right in anchor matching code
	
2000-06-07  Peter Stephenson  <pws@cambridgesiliconradio.com>

	* 11711: Andrej Borsenkow: Test/ztst.zsh: Ignore diff output
	unless the test failed, to work around some diffs which produce
	success messages.

2000-06-07  Sven Wischnowsky  <wischnow@zsh.org>

	* user/3124: Completion/Core/_normal, Src/Zle/compctl.c: optimise
 	command lookup in old and new completion
	
	* 11794: Src/Zle/compcore.c, Src/Zle/complist.c, Src/Zle/zle_tricky.c:
 	hopefully more consistent beeping with menu-selection
	
	* 11792: Doc/Zsh/mod_zutil.yo, Src/Modules/zutil.c: -K option for
 	zparseopts to keep previous array values
	
	* 11789: Completion/Commands/_correct_word,
 	Completion/Commands/_expand_word, Completion/Commands/_next_tags:
 	setup options in bindable commands
	
2000-06-06  Oliver Kiddle  <opk@zsh.org>

	* 11772: Completion/User/_urls: improvements to 11756 suggested by
	Bart in 11763 

2000-06-06  Sven Wischnowsky  <wischnow@zsh.org>

	* 11777: Completion/Core/_expand: make _expand ignore empty
 	expansions
	
	* 11776: Completion/Core/_path_files: fix for _path_files and
 	globcomplete, better test if word contains wildcards
	
	* 11768: Doc/Zsh/expn.yo, Src/lex.c, Src/subst.c: make (e) flag be
 	silent unless (X) is given, too
	
2000-06-05  Oliver Kiddle  <opk@zsh.org>

	* 11756: Completion/User/_urls, Completion/Linux/_rpm: accept -g
	option in _urls and use _urls in _rpm

	* 11755: test/comptest: fix wording in error messages
