2001-09-09  Geoff Wing  <gcw@zsh.org>
	
	* 15621: Src/Zle/zle_refresh.c: display of status line was being
	mucked up; also fix continuation markers "<...." and "<....>"

	* unposted: Src/Zle/zle_refresh.c: fix possible seg fault on a
	screen height shrink

2001-08-28  Sven Wischnowsky  <wischnow@zsh.org>

	* 15717: Src/subst.c, Src/Modules/parameter.c,
	Src/Zle/zle_misc.c: handle possible NULL pointer returned from
	bufferwords()

2001-08-25  Bart Schaefer  <schaefer@zsh.org>

	* 15707: Src/init.c: Fix history crash caused by re-entering
	loop() when the `precmd' shell function uses `source' or `.'.

2001-08-24  Sven Wischnowsky  <wischnow@zsh.org>

	* 15705: Src/Zle/complete.c: test if hash table pointer is NULL
	to avoid SEGV with compstate=()

2001-08-22  Clint Adams  <clint@zsh.org>

        * 15683: Completion/Unix/Command/.distfiles,
        Completion/Unix/Command/_links: completion for
        links(1).

2001-08-21  Clint Adams  <clint@zsh.org>

        * 15675: Src/Builtins/rlimits.awk: handle case
        where RLIM_NLIMITS is set to a number within an
        enum.

2001-08-18  Bart Schaefer  <schaefer@zsh.org>

	* 15617: Src/exec.c: Fix exit status of zsh -fc '! command'.

2001-08-17  Wayne Davison  <wayned@users.sourceforge.net>

	* users/4092: Src/hist.c: Don't drop the last line of the history
	file when handling a signal.

2001-08-16  Sven Wischnowsky  <wischnow@zsh.org>

	* 15639: Src/text.c: fix bug for output of unquoted here-docs and
	-strings with special characters

2001-08-14  Clint Adams  <clint@zsh.org>

        * 15629: Completion/Unix/Command/_zip: unzip -Z
        should behave the same as zipinfo.

2001-08-13  Bart Schaefer  <schaefer@brasslantern.com>

	* 15613 (plus unposted additions): Test/B02typeset.ztst: Tests for
	correct behavior of typeset options and arguments.

	* 15611: Src/builtin.c, Test/D06subscript.ztst: Fix crash bug when
	assigning to array elements in a function in the arguments of
	typeset or local.  Change test for new typeset restrictions.

2001-08-12  Bart Schaefer  <schaefer@zsh.org>

	* Peter Breitenlohner: 14956: Makefile.in, Doc/Makefile.in,
	Test/Makefile.in: Fix various interactions of DESTDIR and use of
	multiple build targets, e.g. "make DESTDIR=/tmp all check info".

2001-08-09  Oliver Kiddle  <opk@zsh.org>

	* 15599: Completion/Unix/Command/_user_admin: detect redhat or
	mandrake before completing redhat's extensions

2001-08-06  Oliver Kiddle  <opk@zsh.org>

	* 15574: Completion/Unix/Command/_cvs, Completion/Unix/Type/_users,
	Completion/Unix/Command/_user_admin, Completion/Unix/Type/_groups,
	Completion/Unix/Type/_directories: new _user_admin completion for
	useradd, groupmod etc and remove redundant duplication in _cvs

	* 15562, Akinori Musha: 15559, 15563: Completion/BSD/Command/_chflags,
	Completion/Unix/Command/_chown, Completion/Unix/Command/_sysctl:
	new BSD completion and fix _chown for symlinks

	* 15577: Completion/Unix/Command/_grep,
	Completion/Unix/Command/_loadkeys: fix exclusion lists

2001-07-31  Clint Adams  <clint@zsh.org>

        * 15551: Completion/Unix/Command/_gzip: handle -l and -t
        as done for -d; only complete presumably compressed files.

2001-07-26  Oliver Kiddle  <opk@zsh.org>

	* 15503: Test/E01options.ztst: fix posixbuiltins test so that it
	isn't broken by the existence of a print external command.

2001-07-25  Sven Wischnowsky  <wischnow@zsh.org>

	* 15487: Src/Zle/complete.c: fix for `--' before matches ignoring all
	-M options in compadd

2001-07-24  Sven Wischnowsky  <wischnow@zsh.org>

	* 15470: Src/parse.c: remove nulargs in here strings

2001-07-20  Sven Wischnowsky  <wischnow@zsh.org>

	* 15433: Src/Zle/computil.c: don't use compsuffix when it might
	be freed; use the right variable in that loop there, dammit

2001-07-18  Sven Wischnowsky  <wischnow@zsh.org>

	* 15402 (Akinora Musha): Completion/Unix/Command/_cvs: add
	support for -R option on BSDs

2001-07-17  Oliver Kiddle  <opk@zsh.org>

	* 15393 (Akinori Musha): Completion/Unix/Command/_chown: use
	colon separator for BSD

2001-07-17  Sven Wischnowsky  <wischnow@zsh.org>

	* 15400: Completion/Unix/Type/_path_files,
	Completion/Zsh/Command/_zstyle, Doc/Zsh/compsys.yo: add
	preserve-prefix style to keep pathname prefix unchanged

2001-07-10  Sven Wischnowsky  <wischnow@zsh.org>

	* 15357: Completion/Base/Completer/_prefix, Src/Zle/compcore.c,
	Src/Zle/zle_tricky.c: prefix completion: make e-o-c-p leave a
	space before the cursor, make _prefix leave the cursor after
	the inserted match even if only a single match; and make the
	C-code not show explanation strings if the completion function
	it doesn't want a list

	* 15352: Completion/Unix/Command/_man: remove not only numeric
	suffixes, but also `.n' and the like

2001-07-09  Bart Schaefer  <schaefer@zsh.org>

	* 15321: Src/exec.c: Fix line numbers in an error message; unwind
	function context properly on obscure autoloading failures.

2001-07-07  Bart Schaefer  <schaefer@zsh.org>

	* 15308: Src/builtin.c: Fix infinite loop on `r OLD=NEW' when OLD
	is the empty string, by rejecting replacements with an empty OLD.

2001-07-06  Oliver Kiddle  <opk@zsh.org>

	* 15252 (and Akinori Musha: 15245): Completion/BSD/Command/_kld,
	Completion/Unix/Command/_sysctl: Add exclusion lists and use
	_multi_parts for BSD completion of sysctl.

2001-07-06  Sven Wischnowsky  <wischnow@zsh.org>

	* 15283: Completion/Unix/Type/_path_files: when looking for
	parameter expansions, ignore `$'s with a backslash before them

2001-07-05  Peter Stephenson  <pws@csr.com>

	* 15277: Src/glob.c: bug with ${(S)...%%...}: the indices
	for start and end of backreferences were incorrect.

	* 15264: Doc/Zsh/grammar.yo: improve description of use of
	variant complex command forms to avoid confusing the present
	writer.

	* 15261: Test/E01options.ztst, Test/ztst.zsh: remaining easy
	option tests.

2001-07-05  Andrej Borsenkow  <bor@zsh.org>

        * 15253 : Src/hashtable.c: make hashdir() hash foo in addition
	to foo.exe on Cygwin again (lost when Cygwin gcc stopped setting
	_WIN32 by default).

2001-07-03  Oliver Kiddle  <opk@zsh.org>

	* 15223, Akinori Musha: 15215: Completion/Unix/Command/.distfiles,
	Completion/Unix/Command/_sysctl: Add completion for sysctl(8)

2001-07-02  Bart Schaefer  <schaefer@zsh.org>

	* unposted: zshconfig.ac: Remove references to FUNCINST_MK.

2001-07-02  Oliver Kiddle  <opk@zsh.org>

	* 15204: zshconfig.ac, Src/compat.c, Src/params.c: fix compilation
	problems on IRIX 5.3 and correct error messages

2001-06-30  Bart Schaefer  <schaefer@zsh.org>

	* 15191: Src/init.c: Don't infinite loop if there's an error in
	the user's precmd -- reset errflag after preprompt().

2001-06-29  Andrej Borsenkow  <bor@zsh.org>

	* 15183: zshconfig.ac: fix DLLD in non-ELF case

2001-06-29  Clint Adams  <clint@zsh.org>

        * Bart: 15083 plus comments: Functions/Zle/bash-backward-kill-word:
	bash-style backward-kill-word function.

2001-06-28  Wayne Davison  <wayned@users.sourceforge.net>

	* 15172: Src/hist.c: Have prepnexthistent() remove any HIST_TEMPSTORE
	entry that is present.

2001-06-28  Peter Stephenson  <pws@csr.com>

	* 15160: Doc/Makefile.in: install zsh.html if generated by
	texi2html.

2001-06-28  Oliver Kiddle  <opk@zsh.org>

	* unposted: Etc/zsh-development-guide, Test/B01cd.ztst: fix typos

	* 15159: Completion/X/Command/_vnc: fix for two digit display numbers,
	use _values for -encodings option and complete for xvncviewer

2001-06-28  Peter Stephenson  <pws@pwstephenson.fsnet.co.uk>

	* 15151: zshconfig.ac: --enable-sitefndir should be
	--enable-site-fndir, spotted by Jos Backus.

2001-06-28  Clint Adams  <clint@zsh.org>

        * 15079: Completion/Unix/Command/_last,
	Completion/Unix/Type/_users: last
	takes other arguments than users.

2001-06-26  Sven Wischnowsky  <wischnow@zsh.org>

	* user/3946: Src/Zle/computil.c: fix for finding the first
	ambiguous path component in compfiles

2001-06-25  Peter Stephenson  <pws@csr.com>

	* unposted: Config/version.mk: version zsh-4.0.2.

	* zsh-users/3942: source installed as Etc/FAQ.yo: latest FAQ.
	
	* unposted: Completion/Zsh/Context/.distfiles: add _autocd.

2001-06-25  Sven Wischnowsky  <wischnow@zsh.org>

	* user/3940: Src/Zle/zle_tricky.c: make expand-word not always
	restore the command line

001-06-22  Andrej Borsenkow  <bor@zsh.org>

	* 15021: Src/prompt.c, Doc/Zsh/prompt.yo: revert to old %l
	semantic; add new %y character instead as suggested by Wayne

2001-06-21  Bart Schaefer  <schaefer@zsh.org>

	* 15020: Completion/Zsh/Command/_cd, Completion/Zsh/Context/_autocd,
	Completion/Zsh/Type/_command_names: When AUTO_CD is set, complete
	directory names (including along cdpath) as well as commands when
	in command position.

	* 15018: Completion/compinit: Fix exit status of compdef.

	* 15002: Completion/Base/Widget/_complete_debug,
	Completion/Base/Widget/_complete_help: Use `trap' to restore state
	properly in case of keyboard interrupt.

2001-06-20  Bart Schaefer  <schaefer@zsh.org>

	* 14880: Completion/Base/Core/_main_complete: Fix insert-tab style
	when value is `pending'.  (Belated commit, out of number order.)

2001-06-20  Peter Stephenson  <pws@csr.com>

	* 14988 with mod suggested in 14989: Src/exec.c: avoid names of
	saved special parameters being trashed.

2001-06-19  Bart Schaefer  <schaefer@zsh.org>

	* 14976: aczsh.m4: Add socklen_t to possible SOCKLEN_T types.

2001-06-19  Andrej Borsenkow  <bor@zsh.org>

	* 14973: acconfig.h, aczsh.m4, zshconfig.ac, Src/Modules/zftp.c:
	fix for reported problems on AIX 4.x. Still no feedback if it
	finally works (or even compiles)

2001-06-18  Bart Schaefer  <schaefer@zsh.org>

	* 14965: Src/Zle/computil.c: Silence compiler warnings.

2001-06-18  Sven Wischnowsky  <wischnow@zsh.org>

	* 14962: Completion/Unix/Type/_path_files: make special-dirs
	work together with file-sort (ignore added qualifiers in a
	test)

2001-06-18  Peter Stephenson  <pws@csr.com>

	* 14959: Src/signals.c: more renames for 14951.

2001-06-18  Andrej Borsenkow <bor@zsh.org>

	* unposted: zshconfig.ac:  forgot to change
	zsh_cv_sys_dynamic_broken -> zsh_cv_shared_environ in one place

2001-06-18  Sven Wischnowsky  <wischnow@zsh.org>

	* 14951: Src/signals.c, Src/signals.h: rename handler() to
	zhandler() because it's now exported to modules

2001-06-17  Bart Schaefer  <schaefer@zsh.org>

	* Jason Began: 3931 (see cvs.netbsd.org): zshconfig.ac: Use
	-fPIC for gcc dynamic linking rather than -fpic.

2001-06-14  Peter Stephenson  <pws@csr.com>

	* 14921: Completion/Zsh/_zftp: autoload zfcd_match and zfget_match
	if necessary.

2001-06-13  Sven Wischnowsky  <wischnow@zsh.org>

	* 14903: Src/Zle/complist.c, Src/Zle/zle_tricky.c: fixes for
	display bugs for completion lists (cursor left one line to far
	up or down)

2001-06-13  Peter Stephenson  <pws@csr.com>

	* 14893: Src/signals.c: make handler mod_export because it's
	needed for signal queueing in various modules.  Probably
	sensible to change handler to zhandler too --- not done yet.

2001-06-13  Sven Wischnowsky  <wischnow@zsh.org>

	* 14897 (and Oliver Kiddle: 14862): Completion/Base/Utility/_values,
	Completion/Unix/Command/_mount, Completion/Unix/Type/_dir_list,
	Src/Zle/computil.c: fix for comparguments (completing after
	single letter options that get their argument in the next
	word); make _values ignore some of the standard option it may
	get; make _mount use _dir_list in some places and improve that;
	`document' comparguments and compvalues with some comments in
	computil.c

2001-06-13  Oliver Kiddle  <opk@zsh.org>

	* 14896: Completion/Zsh/Type/_command_names: don't complete read-only
	parameters on the left side of an assignment

2001-06-13  Peter Stephenson  <pws@csr.com>

	* unposted: Completion/compinstall: spotted by Bart: assignments
	when finding $fpath if not set in current shell were completely
	garbled.

2001-06-13  Sven Wischnowsky  <wischnow@zsh.org>

	* 14883 (Jos Backus): Completion/Unix/Command/_mount: add code for
	BSDish systems

2001-06-12  Peter Stephenson  <pws@csr.com>

	* 14858: Doc/Zsh/options.yo, Src/options.c, Src/subst.c,
	Src/zsh.h, Test/E01options.ztst: KSH_TYPESET option allows
	assignments after typeset not to be split.

2001-06-12  Bart Schaefer  <schaefer@zsh.org>

	* 14849: README: Request "reporter" output only if a bug cannot
	be reproduced with 'zsh -f'.

2001-06-11  Sven Wischnowsky  <wischnow@zsh.org>

	* 14841: Completion/Base/Utility/_values, Src/Zle/computil.c:
	new word parsing for compvalues; this should now handle empty
	separators correctly, as far as it is possible

2001-06-11  Peter Stephenson  <pws@csr.com>

	* 14840: Doc/Zsh/options.yo: document search behaviour with
	PATH_DIRS option.

2001-06-10  Clint Adams  <clint@zsh.org>

	* 14830: config.guess, config.sub:
	upgrade to GNU's June 5 and 8 versions,
	respectively.

2001-06-09  Bart Schaefer  <schaefer@zsh.org>

	* unposted (see 14826): Test/C02cond.ztst: Force group of new
	directory created for file-mode tests to be owned by the current
	effective group.

	* 14824: Test/comptest: Avoid echotc (improvement on 14792).

2001-06-08  Bart Schaefer  <schaefer@zsh.org>

	* 14796: zshconfig.ac: More reliable BROKEN_KILL_ESRCH test.

2001-06-07  Bart Schaefer  <schaefer@zsh.org>

	* 14792: Test/comptest: Don't import the current terminal type for
	the zpty terminal, because the current terminal might not be able
	to run ZLE (e.g., emacs shell mode).

	* 14712: Doc/Zsh/builtins.yo: Improve appearance of long hanging
	paragraph tag for the "read" builtin.

	* 14578: Src/Modules/termcap.c: Handle vagaries of tgetflag()
	return value in new function ztgetflag().

2001-06-07  Wayne Davison  <wayned@users.sourceforge.net>

	* 14793: Src/hist.c: Don't mark a HIST_TMPSTORE entry with HIST_OLD
	so that the HFILE_FAST algorithm in savehistfile() will recheck this
	histnum later.

2001-06-06  Andrej Borsenkow  <bor@zsh.org>

	* 14772: David Lebel <lebel@lebel.org>: zshconfig.ac: patch
	for dynamic linking on OpenBSD

	* 14766: Src/prompt.c: uniform %l substitution

	* 14679, Bart 14693, 14758, 14760: configure.ac, zshconfig.ac,
	.distfiles, Makefile.in, configure.in, Src/mkmakemod.sh: Allow
	processing by both autoconf-2.13 and autoconf-2.50; remove
	config.status hack for autoconf-2.50

2001-06-06  Sven Wischnowsky  <wischnow@zsh.org>

	* 14736: Doc/Zsh/compsys.yo: make docs for _wanted and
	_requested clearer (command has to allow options passed to it)

	* 14733: Completion/Base/Utility/_arguments: two fixes: try all
	actions that have to be tried (but only once), execute actions
	if we aren't after an option already (in the same word)

2001-06-05  Chmouel Boudjnah  <chmouel@mandrakesoft.com>

	* 14550: Completion/Redhat/Command/_rpm: Add --nobuild and --nogpg
	to rpm completion

2001-06-01  Peter Stephenson  <pws@csr.com>

	* Config/version.mk: 4.0.1 released, finally.

